# GEM探测器X射线模拟
模拟`5.9keV` `X射线`在陶瓷`GEM探测器`中的响应，包括`增益`、`能量分辨率`、探测器`原始信号`与`电压信号`(需要知道前放的传递函数)，所有数据均保存在`result`文件夹(需提前建好)的`root`文件中，另外每个事件产生的信号会保存在`result`文件夹的`csv`文件中，图也会保存在`result`文件夹的`pdf`文件中。

得益于ROOT对Python的支持，程序分为C++与Python两个版本，

## ANSYS脚本
该脚本除了可以生成陶瓷GEM探测器的电场文件外，还生成了4个电极的权重场文件，另外对孔中心(Z=0)处的电场强度进行采样保存。

## 编译运行
### x-ray.C
```bash
mkdir build
cd build
cmake ..
make
./x-ray par1
```
- `par1`表示事件数
<!-- - par2表示线程数 -->
### x-ray.py
```bash
python3 -i x-ray.py par1
```
- `par1`表示事件数
- `-i`表示程序运行结束，仍处于`python`环境中，便于查看绘图结果，不加`-i`绘图结果则一闪而过

## 功能介绍
程序设置的是X射线模拟，也可以对电子、离子等粒子进行模拟计算。程序需要通过cmake编译运行(支持OpenMP多线程运行，不过某些函数会导致多线程运行异常)。可以通过布尔参数设置程序功能。
- `plotField`设置是否绘制电场分布
- `plotDrift`设置是否绘制粒子漂移，吃内存，保存结果到pdf会很慢
- `driftIon`设置是否进行离子漂移的计算，计算存在内存泄漏问题，设置`false`
- `calSignal`设置是否进行信号计算
- `plotSignal`设置是否进行信号的绘制，包括了电子、离子、电子离子产生的信号，`calSignal`需设置为`true`
